bufr:
  group_by_variable: airPressure
  variables:
    timestamp:
      datetime:
        year: "*/YEAR"
        month: "*/MNTH"
        day: "*/DAYS"
        hour: "*/HOUR"
        minute: "*/MINU"

    latitude:
      query: "[*/CLAT]"

    longitude:
      query: "[*/CLON]"

    airTemperature:
      query: "[*/UARLV/UATMP/TMDB, */TMDB]"

    dewPointTemperature:
      query: "[*/UARLV/UATMP/TMDP, */TMDP]"

    relativeHumidity: # only applies to NC004005
      query: "*/REHU"

    windDirection:
      query: "[*/UARLV/UAWND/WDIR, */WDIR]"
      type: float
      transforms:
        - scale: 0.0174533  # Convert degrees to radians

    windSpeed:
      query: "[*/UARLV/UAWND/WSPD, */WSPD]"
      type: float

    airPressure:
      query: "[*/UARLV/PRLC, */PRLC]"  # Air pressure at station level
      type: float
      transforms:
        - scale: 0.01  # Convert from Pa to hPa
encoder:
  variables:
    # MetaData
    - name: "time"
      source: timestamp
      longName: "Datetime"
      units: "seconds since 1970-01-01T00:00:00Z"

    - name: "latitude"
      source: latitude
      longName: "Latitude"
      units: "degree_north"
      range: [-90, 90]

    - name: "longitude"
      source: longitude
      longName: "Longitude"
      units: "degree_east"

    - name: "airTemperature"
      source: airTemperature
      longName: "Air Temperature"
      units: "deg C"
      range: [-100, 100]

    - name: "dewPointTemperature"
      source: dewPointTemperature
      longName: "Dew Point Temperature"
      units: "deg C"
      range: [ -100, 100 ]

    - name: "specificHumidity"
      source: specificHumidity
      longName: "Specific Humidity"
      units: "mg/kg"
      range: [0, 50000]

    - name: "windDirection"
      source: windDirection
      longName: "Wind Direction"
      units: "radians"

    - name: "windSpeed"
      source: windSpeed
      longName: "Wind Speed"
      units: "m/s"

    - name: "airPressure"
      source: airPressure
      longName: "Air Pressure"
      units: "hPa"
